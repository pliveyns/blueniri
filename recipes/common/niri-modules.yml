modules:

  - type: dnf
    repos:
      copr:
        - yalter/niri
        - avengemedia/dms
        - avengemedia/danklinux
    install:
      packages:
        - libwayland-server
        - libdisplay-info
        - libseat
        - xwayland-satellite
        - niri
        - dms
        - dms-cli
        - dms-greeter
        - dgop

  - type: dnf
    install:
      packages:
        - plymouth
        - plymouth-system-theme

  - type: systemd
    system:
      enabled:
        - greetd.service
    user:
      enabled:
        - dms.service

  - type: script
    snippets:
      - "sed -i '/^command = /c command = \"/usr/bin/dms-greeter --command niri -C /etc/greetd/dms-niri.kdl\"' /etc/greetd/config.toml"

