modules:

  - type: dnf
    repos:
      copr:
        - yalter/niri
        - avengemedia/dms
        - avengemedia/danklinux
    install:
      packages:
        - niri
        - dms
        - dms-greeter

  - type: systemd
    system:
      enabled:
        - greetd.service
    user:
      enabled:
        - dms.service

  - type: script
    snippets:
      - "sed -i '/^command = /c\command = /usr/bin/dms-greeter --command niri -C /etc/greetd/dms-nir.kdl' /etc/greetd/config.toml"

